@import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;700&display=swap');

:root {
    /* Colores base proporcionados */
    --color-primary: #245c8c; /* Azul oscuro - Base para el header y Física */
    --color-secondary: #6c7486; /* Gris azulado - Base para el texto secundario */
    --color-tertiary: #a45b53; /* Burdeo - Formación Fundamental */
    --color-quaternary: #a18c4b; /* Ocre - Resaltado de prerrequisitos */

    /* Colores para tipos de ramos específicos (personalizados) */
    --color-fisica: var(--color-primary); /* Azul de Física */
    --color-matematica: #4a90e2; /* Celeste de Matemática */
    --color-quimica: #607D8B; /* Gris pizarra de Química */

    /* Nuevos y ajustados colores específicos */
    --color-mecanica: #6A1B9A; /* Púrpura más oscuro para Mecánica (menos chillón) */
    --color-programacion: #795548; /* Marrón para Programación (menos chillón que el amarillo) */
    --color-electrica: #00796B; /* Verde azulado oscuro para Eléctrica (incluye electromagnetismo, campos, conversión) */
    --color-eie-code-specific: #D32F2F; /* Rojo para ramos con código EIE, si no tienen tipo específico */

    /* Nuevos colores solicitados */
    --color-optativo: #9E9E9E; /* Gris para Optativo */
    --color-ingles: #FF9800; /* Naranja para Inglés */
    --color-formacion-fundamental: var(--color-tertiary); /* Burdeo para Formación Fundamental (ya estaba, se reconfirma) */
    --color-proyecto: #D32F2F; /* Rojo para Proyecto de Titulación (color rojo fuerte) */

    /* Otros colores específicos */
    --color-laboratorio: #FF5722; /* Naranja para Laboratorio */
    --color-gestion: #4CAF50; /* Verde para Gestión */
    --color-comunicacion: #FFC107; /* Ámbar para Comunicación */
    --color-electronica: #FBC02D; /* Amarillo oscuro para Electrónica */
    --color-legal: #8BC34A; /* Verde claro para Legal */
    --color-economia: #CDDC39; /* Verde lima para Economía */
    --color-estadistica: #00BCD4; /* Cian para Estadística */

    /* Color por defecto y resaltados */
    --color-default-ramo: #78909C; /* Azul grisáceo para tipos no especificados */
    --highlight-prereq: var(--color-quaternary); /* Ocre */
    --highlight-unlocks: #4CAF50; /* Verde brillante, para ramos que se desbloquean */
    --highlight-completed-text: #666;
    --highlight-completed-bg: #e0e0e0;
    --highlight-unlocked-border: #2196F3; /* Azul brillante para desbloqueados */
}

body {
    font-family: 'Montserrat', sans-serif; /* Tipografía PUCV */
    margin: 0;
    padding: 0;
    background-color: #f0f2f5;
    color: #333;
    line-height: 1.6;
}

header {
    background-color: var(--color-primary);
    color: white;
    padding: 25px 20px;
    text-align: center;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    margin-bottom: 20px;
}

header h1 {
    margin: 0;
    font-size: 2.5em;
    letter-spacing: 1px;
    font-weight: 700; /* Negrita para el título */
}

header h2 {
    margin-top: 5px;
    font-size: 1.2em;
    opacity: 0.9;
    font-weight: 400;
}

.controls {
    margin-top: 15px;
    text-align: center;
    margin-bottom: 20px;
}

#clearCompleted {
    background-color: var(--color-tertiary);
    color: white;
    border: none;
    padding: 10px 20px;
    border-radius: 5px;
    cursor: pointer;
    font-size: 1em;
    transition: background-color 0.3s ease;
    font-weight: 500;
}

#clearCompleted:hover {
    background-color: #8c4a43; /* Un tono más oscuro del burdeo */
}

#malla-container {
    display: flex;
    flex-direction: column; /* Las secciones de año se apilan verticalmente */
    padding: 0 20px;
    gap: 30px;
}

.year-section {
    background-color: white;
    border-radius: 10px;
    box-shadow: 0 6px 12px rgba(0, 0, 0, 0.1);
    padding: 20px;
    overflow-x: auto; /* Permite el desplazamiento horizontal solo dentro de esta sección del año */
}

.year-section h3 {
    text-align: center;
    color: var(--color-primary);
    font-size: 2em;
    margin-top: 0;
    margin-bottom: 25px;
    border-bottom: 3px solid var(--color-secondary);
    padding-bottom: 10px;
    font-weight: 700;
}

.semesters-grid {
    display: flex; /* Los semestres van horizontalmente */
    flex-direction: row;
    flex-wrap: nowrap; /* Evita que los semestres se envuelvan */
    justify-content: flex-start; /* Alinea los semestres al inicio */
    gap: 25px;
    padding-bottom: 15px; /* Espacio para la barra de desplazamiento si aparece */
}

.semestre {
    background-color: #f9f9f9;
    border: 1px solid #e0e0e0;
    border-radius: 8px;
    padding: 15px;
    min-width: 280px; /* Ancho mínimo para cada columna de semestre */
    min-height: 250px;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
    display: flex;
    flex-direction: column;
    transition: transform 0.2s ease;
    flex-shrink: 0; /* Evita que los elementos se encojan */
}

.semestre:hover {
    transform: translateY(-3px);
}

.semestre h4 {
    margin-top: 0;
    color: var(--color-secondary);
    font-size: 1.4em;
    text-align: center;
    margin-bottom: 15px;
    padding-bottom: 5px;
    border-bottom: 1px dashed #e0e0e0;
    font-weight: 500;
}

.ramo {
    background-color: var(--color-default-ramo); /* Color por defecto */
    border-radius: 6px;
    padding: 12px;
    margin-bottom: 12px;
    cursor: pointer;
    transition: all 0.3s ease;
    color: white; /* Texto blanco por defecto */
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    text-align: center;
    min-height: 80px;
    position: relative;
    font-weight: 500;
}

.ramo:hover {
    transform: scale(1.02);
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
}

.ramo .codigo {
    font-size: 0.85em;
    font-weight: bold;
    margin-bottom: 5px;
    opacity: 0.9;
}

.ramo .nombre {
    font-size: 1em;
    font-weight: 500;
}

/* Colores específicos por tipo de ramo */
.ramo.Fisica { background-color: var(--color-fisica); }
.ramo.Matematica { background-color: var(--color-matematica); }
.ramo.FormacionFundamental { background-color: var(--color-formacion-fundamental); }
.ramo.Quimica { background-color: var(--color-quimica); }
.ramo.Mecanica { background-color: var(--color-mecanica); }
.ramo.Programacion { background-color: var(--color-programacion); color: white; }
.ramo.Electrica { background-color: var(--color-electrica); }
.ramo.Laboratorio { background-color: var(--color-laboratorio); }
.ramo.Gestion { background-color: var(--color-gestion); }
.ramo.Comunicacion { background-color: var(--color-comunicacion); color: #333; }
.ramo.Electronica { background-color: var(--color-electronica); color: #333; }
.ramo.Legal { background-color: var(--color-legal); color: #333; }
.ramo.Economia { background-color: var(--color-economia); color: #333; }
.ramo.Estadistica { background-color: var(--color-estadistica); }

/* Nuevos ramos solicitados por color */
.ramo.Ingles { background-color: var(--color-ingles); }
.ramo.Optativo { background-color: var(--color-optativo); }
.ramo.Proyecto { background-color: var(--color-proyecto); }


/* Estilo específico para ramos con código que empieza por EIE,
   ESTE COLOR APLICARÁ SÓLO SI EL RAMO NO TIENE UN 'TIPO' DEFINIDO ARRIBA CON SU PROPIO COLOR.
   Si un ramo es "Electrica" y su código empieza con "EIE", prevalecerá el color de "Electrica".
   Si quieres que EIE prevalezca siempre, usa `!important` y reordena.
*/
.ramo[data-codigo^="EIE"]:not(.Electrica):not(.Programacion):not(.Mecanica):not(.Laboratorio):not(.Gestion):not(.Comunicacion):not(.Electronica):not(.Proyecto):not(.Legal):not(.Economia):not(.Estadistica):not(.Ingles):not(.Optativo):not(.Fisica):not(.Matematica):not(.FormacionFundamental):not(.Quimica) {
    background-color: var(--color-eie-code-specific); /* Rojo solo para los EIE que no tengan un tipo con color ya asignado */
    color: white;
}


/* Estilos para ramos completados */
.ramo.completed {
    background-color: var(--highlight-completed-bg) !important;
    color: var(--highlight-completed-text) !important;
    text-decoration: line-through;
    opacity: 0.6;
    pointer-events: auto;
    transform: none;
    box-shadow: none;
}

/* Estilos para ramos desbloqueados (listos para tomar) */
.ramo.unlocked {
    border: 3px solid var(--highlight-unlocked-border);
    box-shadow: 0 0 15px rgba(33, 150, 243, 0.4);
    opacity: 1;
    transform: scale(1.01);
}

/* Estilos para resaltar prerrequisitos (al hacer clic) */
.ramo.highlight-prereq {
    background-color: var(--highlight-prereq) !important;
    color: white !important;
    border: 2px solid white;
    opacity: 1;
    box-shadow: 0 0 10px var(--highlight-prereq);
    transform: scale(1.03);
}

/* Estilos para resaltar ramos que se desbloquean (al hacer clic) */
.ramo.highlight-unlocks {
    background-color: var(--highlight-unlocks) !important;
    color: white !important;
    border: 2px solid white;
    opacity: 1;
    box-shadow: 0 0 10px var(--highlight-unlocks);
    transform: scale(1.03);
}

/* Estilo para el ramo actualmente seleccionado/cliqueado */
.ramo.highlight-selected {
    border: 3px solid #FF9800;
    box-shadow: 0 0 12px rgba(255, 152, 0, 0.6);
    transform: scale(1.04);
}

footer {
    text-align: center;
    margin-top: 40px;
    padding: 20px;
    border-top: 1px solid #ccc;
    color: #666;
    font-size: 0.85em;
    background-color: white;
    box-shadow: 0 -2px 8px rgba(0, 0, 0, 0.05);
    font-weight: 400;
}

/* Media Queries para responsividad */
@media (max-width: 768px) {
    header h1 {
        font-size: 2em;
    }
    .year-section {
        padding: 15px;
    }
    .semestre {
        min-width: 250px;
    }
}
