@import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;700&display=swap');

:root {
    /* Colores base de la PUCV (ajustados para contraste y armonía) */
    --pucv-blue: #004A8F; /* Azul principal PUCV */
    --pucv-light-blue: #007bff; /* Azul más claro para algunos elementos */
    --pucv-gold: #FFB300; /* Dorado/Amarillo PUCV */
    --pucv-grey: #6c757d; /* Gris para texto secundario */
    --pucv-dark-grey: #343a40; /* Gris oscuro para texto principal */
    --pucv-red: #DC3545; /* Rojo para botones de alerta/limpiar */

    /* Colores de ramos inspirados en la malla labcomp.cl y adaptados a la paleta PUCV */
    --color-fisica: #1A5276; /* Azul profundo */
    --color-matematica: #21618C; /* Azul un poco más claro que física */
    --color-quimica: #117A65; /* Verde azulado oscuro */
    --color-mecanica: #616A6B; /* Gris plomo */
    --color-programacion: #2874A6; /* Azul brillante */
    --color-electrica: #D68910; /* Naranja quemado (similar al labcomp) */
    --color-laboratorio: #BA4A00; /* Naranja oscuro */
    --color-gestion: #28B463; /* Verde esmeralda */
    --color-comunicacion: #F39C12; /* Naranja amarillo (similar al labcomp) */
    --color-electronica: #F4D03F; /* Amarillo mostaza */
    --color-legal: #884EA0; /* Púrpura oscuro */
    --color-economia: #CB4335; /* Rojo teja */
    --color-estadistica: #17A589; /* Verde azulado */
    --color-ingles: #3D8FFD; /* Azul claro vibrante */
    --color-proyecto: #C0392B; /* Rojo ladrillo */
    --color-optativo: #99A3A4; /* Gris neutro */
    --color-formacionfundamental: #7D3C98; /* Morado oscuro */

    /* Colores de estado y resaltado (ajustados) */
    --highlight-prereq: #FFEB3B; /* Amarillo brillante para prerrequisitos */
    --highlight-unlocks: #66BB6A; /* Verde claro para ramos desbloqueados */
    --highlight-completed-bg: #E0E0E0; /* Gris claro para completados */
    --highlight-completed-text: #757575; /* Gris medio para texto de completados */
    --highlight-unlocked-border: #007BFF; /* Azul para ramos listos para tomar */
    --highlight-selected-border: #FF5722; /* Naranja para el seleccionado */
}

body {
    font-family: 'Montserrat', sans-serif; /* Tipografía PUCV */
    margin: 0;
    padding: 0;
    background-color: #f8f9fa; /* Fondo blanco ligeramente gris */
    color: var(--pucv-dark-grey);
    line-height: 1.6;
    overflow-x: hidden; /* Evita scroll horizontal innecesario */
}

header {
    background-color: var(--pucv-blue); /* Azul PUCV */
    color: white;
    padding: 25px 20px;
    text-align: center;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.15);
    margin-bottom: 30px;
    position: relative; /* Para el degradado o efecto */
}

header h1 {
    margin: 0;
    font-size: 2.8em;
    letter-spacing: 1px;
    font-weight: 700;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.2);
}

header h2 {
    margin-top: 8px;
    font-size: 1.4em;
    opacity: 0.9;
    font-weight: 500;
}

.controls {
    margin-top: 20px;
}

#clearCompleted {
    background-color: var(--pucv-red);
    color: white;
    border: none;
    padding: 12px 25px;
    border-radius: 8px;
    cursor: pointer;
    font-size: 1.05em;
    font-weight: 600;
    transition: background-color 0.3s ease, transform 0.2s ease;
    box-shadow: 0 3px 6px rgba(0,0,0,0.2);
}

#clearCompleted:hover {
    background-color: #C0392B; /* Rojo ligeramente más oscuro */
    transform: translateY(-2px);
}

/* --- ESTILOS DE LA ESTRUCTURA PRINCIPAL (AÑOS Y SEMESTRES) --- */
#malla-container {
    max-width: 1500px; /* Aumentado para más espacio horizontal */
    margin: 0 auto 50px auto;
    padding: 25px;
    background-color: white;
    border-radius: 12px;
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
}

.anio-section {
    margin-bottom: 40px;
    padding-bottom: 25px;
    border-bottom: 2px solid #e9ecef; /* Línea divisoria suave */
    overflow-x: auto; /* Permite scroll horizontal */
    -webkit-overflow-scrolling: touch;
}

.anio-section:last-child {
    border-bottom: none;
    margin-bottom: 0;
    padding-bottom: 0;
}

.anio-section h2 {
    text-align: center;
    font-size: 2.4em;
    color: var(--pucv-blue);
    margin-bottom: 30px;
    padding-bottom: 12px;
    border-bottom: 3px solid var(--pucv-gold); /* Línea dorada distintiva */
    display: table; /* Para centrar la línea dorada con el texto */
    margin-left: auto;
    margin-right: auto;
    font-weight: 700;
}

.semestres-container {
    display: flex; /* Semestres en fila */
    gap: 20px; /* Espacio entre columnas */
    padding-bottom: 15px; /* Espacio para scrollbar si es necesario */
}

.semestre {
    background-color: #f0f4f7; /* Fondo de semestre más claro */
    border: 1px solid #dee2e6;
    border-radius: 10px;
    padding: 18px;
    min-width: 220px; /* Ancho mínimo de cada columna */
    flex-shrink: 0;
    box-shadow: 0 3px 8px rgba(0, 0, 0, 0.08);
    display: flex;
    flex-direction: column;
    transition: transform 0.2s ease;
}

.semestre:hover {
    transform: translateY(-3px);
}

.semestre h3 {
    text-align: center;
    color: var(--pucv-blue);
    margin-top: 0;
    margin-bottom: 18px;
    font-size: 1.4em;
    border-bottom: 1px solid var(--pucv-light-blue); /* Línea debajo del semestre */
    padding-bottom: 10px;
    font-weight: 700; /* Más audaz para que resalte más */
    text-shadow: 0 1px 1px rgba(0,0,0,0.1); /* Sombra ligera para el texto */
}

.ramos-list {
    display: flex;
    flex-direction: column;
    gap: 12px; /* Espacio entre ramos */
}

/* --- ESTILOS DE RAMOS --- */
.ramo {
    background-color: var(--pucv-grey); /* Color por defecto, debería ser sobreescrito */
    border-radius: 8px;
    padding: 15px 10px;
    cursor: pointer;
    transition: all 0.3s ease;
    color: white; /* Texto blanco por defecto en los ramos */
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.12);
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    text-align: center;
    min-height: 90px; /* Aumenta la altura para mejor legibilidad */
    position: relative;
    font-weight: 500;
    line-height: 1.3;
}

.ramo:hover {
    transform: scale(1.03);
    box-shadow: 0 5px 12px rgba(0, 0, 0, 0.2);
}

.ramo .codigo {
    font-size: 0.85em;
    font-weight: bold;
    margin-bottom: 5px;
    opacity: 0.95;
    letter-spacing: 0.5px;
}

.ramo .nombre {
    font-size: 1em; /* Un poco más grande */
    font-weight: 500;
    margin-bottom: 5px;
}

.ramo .creditos {
    font-size: 0.75em;
    opacity: 0.8;
}

/* Colores específicos por tipo de ramo (clases generadas por JavaScript) */
/* Asegúrate que estos nombres coincidan con los 'tipo' en ramos.json después de la estandarización */
.ramo.Electrica { background-color: var(--color-electrica); }
.ramo.FormacionFundamental { background-color: var(--color-formacionfundamental); }
.ramo.Fisica { background-color: var(--color-fisica); }
.ramo.Matematica { background-color: var(--color-matematica); }
.ramo.Quimica { background-color: var(--color-quimica); }
.ramo.Mecanica { background-color: var(--color-mecanica); }
.ramo.Programacion { background-color: var(--color-programacion); }
.ramo.Estadistica { background-color: var(--color-estadistica); }
.ramo.Laboratorio { background-color: var(--color-laboratorio); }
.ramo.Electronica { background-color: var(--color-electronica); color: var(--pucv-dark-grey);} /* Texto oscuro para colores claros */
.ramo.Comunicacion { background-color: var(--color-comunicacion); color: var(--pucv-dark-grey);} /* Texto oscuro para colores claros */
.ramo.Ingles { background-color: var(--color-ingles); }
.ramo.Economia { background-color: var(--color-economia); }
.ramo.Gestion { background-color: var(--color-gestion); }
.ramo.Legal { background-color: var(--color-legal); }
.ramo.Optativo { background-color: var(--color-optativo); }
.ramo.Proyecto { background-color: var(--color-proyecto); }


/* Estilos para ramos completados */
.ramo.completed {
    background-color: var(--highlight-completed-bg) !important;
    color: var(--highlight-completed-text) !important;
    text-decoration: line-through;
    opacity: 0.6;
    pointer-events: auto;
    transform: none;
    box-shadow: none;
    border: 1px solid #ccc;
}
.ramo.completed .codigo,
.ramo.completed .nombre,
.ramo.completed .creditos {
    color: inherit; /* Hereda el color del padre */
    opacity: 1; /* Asegura que el texto sea visible aunque el ramo esté opaco */
}


/* Estilos para ramos desbloqueados (listos para tomar) */
.ramo.unlocked {
    border: 3px solid var(--highlight-unlocked-border);
    box-shadow: 0 0 18px rgba(0, 123, 255, 0.4); /* Sombra azul más pronunciada */
    opacity: 1;
    transform: scale(1.01);
}

/* Estilos para resaltar prerrequisitos (al hacer clic o pasar el ratón) */
.ramo.highlight-prereq {
    background-color: var(--highlight-prereq) !important;
    color: var(--pucv-dark-grey) !important; /* Texto oscuro para amarillo */
    border: 3px solid white;
    opacity: 1;
    box-shadow: 0 0 15px var(--highlight-prereq);
    transform: scale(1.04);
}

/* Estilos para resaltar ramos que se desbloquean (al hacer clic o pasar el ratón) */
.ramo.highlight-unlocks {
    background-color: var(--highlight-unlocks) !important;
    color: white !important;
    border: 3px solid white;
    opacity: 1;
    box-shadow: 0 0 15px var(--highlight-unlocks);
    transform: scale(1.04);
}

/* Estilo para el ramo actualmente seleccionado/cliqueado */
.ramo.highlight-selected {
    border: 4px solid var(--highlight-selected-border); /* Borde naranja más grueso */
    box-shadow: 0 0 20px rgba(255, 87, 34, 0.7); /* Sombra más intensa */
    transform: scale(1.05);
}

footer {
    text-align: center;
    margin-top: 50px;
    padding: 25px;
    border-top: 1px solid #e9ecef;
    color: var(--pucv-grey);
    font-size: 0.88em;
    background-color: white;
    box-shadow: 0 -3px 10px rgba(0, 0, 0, 0.05);
    font-weight: 400;
}

/* Media Queries para responsividad */
@media (max-width: 768px) {
    header h1 {
        font-size: 2em;
    }

    header h2 {
        font-size: 1.1em;
    }

    .semestres-container {
        flex-direction: column; /* Apila los semestres verticalmente en pantallas pequeñas */
        align-items: center;
    }

    .semestre {
        width: 95%; /* Ocupa casi todo el ancho disponible */
        margin-bottom: 20px;
        min-width: unset; /* Elimina el ancho mínimo para que se ajuste */
    }

    #malla-container {
        padding: 15px;
    }

    .anio-section h2 {
        font-size: 1.8em;
    }

    .ramo {
        min-height: 80px;
        padding: 10px;
    }

    .ramo .nombre {
        font-size: 0.9em;
    }

    .ramo .codigo, .ramo .creditos {
        font-size: 0.75em;
    }
}

/* Ajustes para pantallas aún más pequeñas (móviles) */
@media (max-width: 480px) {
    header {
        padding: 20px 10px;
    }
    header h1 {
        font-size: 1.6em;
    }
    header h2 {
        font-size: 0.9em;
    }
    #clearCompleted {
        padding: 10px 15px;
        font-size: 0.9em;
    }
    .semestre {
        padding: 10px;
    }
    .semestre h3 {
        font-size: 1.2em;
    }
    .ramo {
        min-height: 70px;
        padding: 8px;
    }
    .ramo .nombre {
        font-size: 0.85em;
    }
    .ramo .codigo, .ramo .creditos {
        font-size: 0.7em;
    }
}
